<?xml version="1.0" encoding="utf-8"?>
<!-- $Id: bds2006.wxs,v 1.1 2007-08-09 11:04:15 tony Exp $ -->

<!-- This Fragment installs the Files for BDS2006 -->

<?define guidJPEGBPL="95C93275-2D7E-42D3-B97C-786D1BC7EF06"?>
<?define guidJPEGQRBPL="F1E835A9-ABF0-4226-A9D8-FA0180EFB230"?>
<?define guidMWAQRJPEG="152ABD3D-1F8F-46C2-B027-05B84907A9A3"?>
<?define guidRTDCP="852A99DE-ED7A-4856-8410-7BB0515A903C"?>
<?define guidSTDruntime="D8C61CC4-89CD-4CEB-BA17-7EE3D335DED8"?>
<?define guidDCPJPEGDCP="59847D77-0CA5-43C0-AC7B-7E910FEB50E6"?>
<?define guidQRDCPJPEGDCP="8D70524B-7D0E-44A1-BDC4-A9E8D8F90646"?>
<?define guidJPEGQRstdBPL="9CBFDB97-2569-4825-B4CE-AF465851206C"?>
<?define guidQRstdDCPJPEGDCP="BF02E0BA-2342-4F9B-9641-FB69859C249B"?>

<?ifdef EVALUATION?>
<?define dcuDir="source\evaluationUnits\d10"?>
<?define guidJPEGLIB="25AEDF1F-2D29-4642-846D-D38818E7F90C"?>
<?define guidMWAJPEG="54A9A730-C036-4FF9-A687-76F455EB0EA5"?>
<?define guidMWADBJPEG="76E191E2-3220-4D13-B890-BBDCE381B638"?>
<?else?>
<?define dcuDir="source\Units\d10"?>
<?define guidJPEGLIB="3FB3BA26-09BF-4A20-8F90-81EDC88F7DFF"?>
<?define guidMWAJPEG="D957DBCE-54C9-473E-A0CE-622EDB9ED3A9"?>
<?define guidMWADBJPEG="2999027F-CB3E-423D-9D10-6C0A7CF66675"?>
<?endif?>

<Wix xmlns="http://schemas.microsoft.com/wix/2003/01/wi">

 <Fragment>
  <Property Id="INSTALLDIRD2006">
    <RegistrySearch Id="ROOTVER180" Root="HKLM" Key="SOFTWARE\Borland\BDS\4.0"
                      Name="RootDir" Type="directory" />
  </Property>

  <Property Id="QR4D2006">
    <RegistrySearch Id="QRROOTVER180" Root="HKLM" Key="SOFTWARE\Borland\BDS\4.0"
                      Name="RootDir" Type="directory" >
	  <DirectorySearch Id="QR4DesignbplVER180" Path="bin" Depth="1">
        <FileSearch Id="QR4DesignbplVER180" LongName="QR4DesignD2006.bpl" />
	  </DirectorySearch>
    </RegistrySearch>
  </Property>

  <Property Id="QR4STDD2007">
    <RegistrySearch Id="QSROOTVER180" Root="HKLM" Key="SOFTWARE\Borland\BDS\5.0"
                      Name="RootDir" Type="directory" >
	  <DirectorySearch Id="QR4stdVER180" Path="QRStandard" Depth="1">
        <FileSearch Id="QR4stdVER180" LongName="QR4StdDesD2006.bpl" />
 	   </DirectorySearch>
    </RegistrySearch>
  </Property>

  <CustomAction Id="SetInstallDirVER180" Directory="DelphiDirVER180"
                 Value="[INSTALLDIRD2006]"/>
  <InstallExecuteSequence>
    <Custom Action='SetInstallDirVER180' After='CostFinalize'>INSTALLDIRD2006</Custom>
  </InstallExecuteSequence>

  <DirectoryRef Id="TARGETDIR">
    <Directory Id="DelphiDirVER180" Name="Delphi10" LongName="bds2006">
	  <Directory Id="bindirVER180" Name="bin">

       <!-- Standard Design Time Package -->

	   <Component Id="DesignTimePkgeVER180" Guid="$(var.guidJPEGBPL)" DiskId="1">
	     <Condition>INSTALLDIRD2006 and not QR4D2006 and not QR4STDD2007</Condition>
  	     <File Id="dcljpg10bpl" Name="dcljpg10.bpl" LongName="dclmwajpgD2006.bpl"
	   	     Source="source\Packages\dclmwajpgD2006.bpl"/>
	     <Registry Id="AddStd2PackageListVER180"
		 		   Root="HKCU" Type="string"
		 	       Key="Software\Borland\BDS\4.0\Known Packages"
				   Name="[#dcljpg10bpl]"
				   Value="MWA JPEG Component Library v$(env.RELEASE)" />
	   </Component>

       <!-- Quick Reports Design Time Package -->

	   <Component Id="DesignTimePkgeQRVER180" Guid="$(var.guidJPEGQRBPL)" DiskId="1">
	     <Condition>INSTALLDIRD2006 and QR4D2006</Condition>
  	     <File Id="qcljpg10bpl" Name="qcljpg10.bpl" LongName="qclmwajpgD2006.bpl"
	   	     Source="source\Packages\QR\dclmwajpgD2006.bpl">
		   <CopyFile Id="CopyQclVER180" DestinationName="dcljpg10.bpl"
                     DestinationLongName="dclmwajpgD2006.bpl"/>
		 </File>
		 <RemoveFile Id="RemoveQclVER180" Name="dcljpg10.bpl"
                     LongName="dclmwajpgD2006.bpl" On="uninstall"/>
	     <Registry Id="AddQR2PackageListVER180"
		 		   Root="HKCU" Type="string"
		 	       Key="Software\Borland\BDS\4.0\Known Packages"
				   Name="[#dcljpg10bpl]"
				   Value="MWA JPEG Component Library v$(env.RELEASE)" />
	   </Component>

       <!-- Quick Reports Standand Design Time Package -->

	   <Component Id="DesignTimePkgeQRstdVER180" Guid="$(var.guidJPEGQRstdBPL)" DiskId="1">
	     <Condition>INSTALLDIRD2006 and not QR4D2006 and QR4STDD2007</Condition>
  	     <File Id="qsljpg10bpl" Name="qsljpg10.bpl" LongName="qslmwajpgD2006.bpl"
	   	     Source="source\Packages\QRstd\dclmwajpgD2006.bpl">
		   <CopyFile Id="CopyQslVER180" DestinationName="dcljpg10.bpl"
                     DestinationLongName="dclmwajpgD2006.bpl"/>
		 </File>
		 <RemoveFile Id="RemoveQslVER180" Name="dcljpg10.bpl"
                     LongName="dclmwajpgD2006.bpl" On="uninstall"/>
	     <Registry Id="AddQS2PackageListVER180"
		 		   Root="HKCU" Type="string"
		 	       Key="Software\Borland\BDS\4.0\Known Packages"
				   Name="[#dcljpg10bpl]"
				   Value="MWA JPEG Component Library v$(env.RELEASE)" />
	   </Component>
	  </Directory>
	  <Directory Id="libdirVER180" Name="lib">

      <!-- dcp files -->

	    <Component Id="dcljpgdcpVER180" Guid="$(var.guidDCPJPEGDCP)" DiskId="1">
	     <Condition>INSTALLDIRD2006 and not QR4D2006 and not QR4STDD2007</Condition>
		  <File Id="dclmwajpgVER180" Name="dclmjpg.dcp" LongName="dclmwajpg.dcp"
		  	    Source="source\Packages\d10\dclmwajpg.dcp" />
 	    </Component>

	    <Component Id="dcljpgqrdcpVER180" Guid="$(var.guidQRDCPJPEGDCP)" DiskId="1">
	     <Condition>INSTALLDIRD2006 and QR4D2006</Condition>
		  <File Id="qclmwajpgVER180" Name="qclmjpq.dcp" LongName="qclmwajpg.dcp"
		  	    Source="source\Packages\QR\d10\dclmwajpg.dcp" >
		   <CopyFile Id="CopyQcpVER180" DestinationName="dclmjpg.dcp"
                     DestinationLongName="dclmwajpg.dcp"/>
		 </File>
		 <RemoveFile Id="RemoveQcpVER180" Name="dclmjpg.dcp"
                     LongName="dclmwajpg.dcp" On="uninstall"/>
 	    </Component>

	    <Component Id="dcljpgqsdcpVER180" Guid="$(var.guidQRstdDCPJPEGDCP)" DiskId="1">
	     <Condition>INSTALLDIRD2006 and not QR4D2006 and QR4STDD2007</Condition>
		  <File Id="qslmwajpgVER180" Name="qslmjpq.dcp" LongName="qslmwajpg.dcp"
		  	    Source="source\Packages\QRstd\d10\dclmwajpg.dcp" >
		   <CopyFile Id="CopyQspVER180" DestinationName="dclmjpg.dcp"
                     DestinationLongName="dclmwajpg.dcp"/>
		 </File>
		 <RemoveFile Id="RemoveQspVER180" Name="dclmjpg.dcp"
                     LongName="dclmwajpg.dcp" On="uninstall"/>
 	    </Component>

       <!-- dcu  files -->

	    <Component Id="jpeglibVER180" Guid="$(var.guidJPEGLIB)" DiskId="1">
	     <Condition>INSTALLDIRD2006</Condition>
		  <File Id="jpeglibdcuVER180" Name="jpeglib.dcu"
		  	    Source="$(var.dcuDir)\jpeglib.dcu" />
 	    </Component>
	    <Component Id="mwajpegVER180" Guid="$(var.guidMWAJPEG)" DiskId="1">
	     <Condition>INSTALLDIRD2006</Condition>
		  <File Id="mwajpegdcuVER180" Name="mwajpeg.dcu"
		  	    Source="$(var.dcuDir)\mwajpeg.dcu" />
 	    </Component>
	    <Component Id="mwadbjpgVER180" Guid="$(var.guidMWADBJPEG)" DiskId="1">
	     <Condition>INSTALLDIRD2006</Condition>
		  <File Id="mwadbjpgdcuVER180" Name="mwadbjpg.dcu"
		  	    Source="$(var.dcuDir)\mwadbjpg.dcu" />
 	    </Component>

        <!-- Give them the source to mwaQRjpg.pas -->

	    <Component Id="mwaQRjpgVER180" Guid="$(var.guidMWAQRJPEG)" DiskId="1">
	     <Condition>INSTALLDIRD2006</Condition>
		  <File Id="mwaQRjpgpasVER180" Name="mwaQRjpg.pas"
		  	    Source="source\source\mwaQRjpg.pas" />
 	    </Component>
	  </Directory>
      <?ifndef EVALUATION?>

      <!-- Run Time Package -->

	  <Directory Id="JpegDirVER180" Name="mwajpeg">
          <Component Id="RTDCPVER180" DiskId="1" Guid="$(var.guidRTDCP)">
 	        <Condition>INSTALLDIRD2006</Condition>
            <File Id="mwajpgdcpVER180" Name="mwajpg.dcp"
			      Source="source\Packages\d10\mwajpg.dcp" />
          </Component>
          <Component Id="STDruntimeVER180" DiskId="1" Guid="$(var.guidSTDruntime)">
 	        <Condition>INSTALLDIRD2006</Condition>
            <File Id="mwajpgD2006bplVER180" Name="mwajpg10.bpl" LongName="mwajpgD2006.bpl"
			      Source="source\Packages\mwajpgD2006.bpl" />
          </Component>
	  </Directory>
	  <?endif?>
	</Directory>
  </DirectoryRef>

  <ComponentGroup Id="Delphi2006" >
    <ComponentRef Id="DesignTimePkgeVER180"/>
    <ComponentRef Id="DesignTimePkgeQRVER180"/>
    <ComponentRef Id="DesignTimePkgeQRstdVER180"/>
    <ComponentRef Id="jpeglibVER180"/>
    <ComponentRef Id="mwajpegVER180"/>
    <ComponentRef Id="mwadbjpgVER180"/>
    <ComponentRef Id="mwaQRjpgVER180"/>
    <ComponentRef Id="dcljpgdcpVER180"/>
    <ComponentRef Id="dcljpgqrdcpVER180"/>
    <ComponentRef Id="dcljpgqsdcpVER180"/>
    <?ifndef EVALUATION?>
    <ComponentRef Id="RTDCPVER180"/>
    <ComponentRef Id="STDruntimeVER180"/>
    <?endif?>
  </ComponentGroup>

 </Fragment>

</Wix>